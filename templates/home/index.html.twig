{% extends 'base.html.twig' %}

{% block body %}
    <section class="w-full p-2 h-screen flex-col pb-10">
        <div class="h-1/2 p-10 flex items-center justify-center">
            <a href="#" class="w-full h-full rounded-3xl flex hover:bg-gray-100 hover:duration-100">
                <img src="{{ asset('images/' ~ mostResponsesQuestion.file.originalName) }}" alt="image_question" class="w-1/3 py-2 pl-2 h-full object-cover rounded-3xl ">
                <div class="w-2/3 h-full pt-8 ml-10">
                    <div class="flex w-1/4 justify-between">
                        <p class="font-bold">{{ mostResponsesQuestion.category.name }}</p>
                        <span>•</span>
                        <p class="font-light">Il y a {{ mostResponsesQuestion.createdAt|date }}</p>
                    </div>
                    <div class="h-2/4 flex items-center font-medium text-3xl">
                        {{ mostResponsesQuestion.title }}
                    </div>
                    <div class="h-1/4 flex">
                        <p class="text-[#AD0569]">{{ mostResponsesQuestion.responses.count() }} réponses</p>
                        <span class="px-2 text-[#AD0569]">-</span>
                        <p class="text-[#AD0569]">par {{ mostResponsesQuestion.author.username }} </p>
                    </div>
                </div>
            </a>
        </div>
        <div class="h-1/2 px-10 flex items-center justify-center">
            <div class="w-full h-full">
                <div class="w-full h-1/6 flex justify-between items-center">
                    <h2 class="text-3xl font-semibold">Dernières questions</h2>
                    <a href="{{ path('app_question') }}" class="text-[#AD0569] underline text-lg">Voir toutes les questions</a>
                </div>
                <div class="flex justify-between">
                    {% for question in lastQuestions %}
                        <twig:Card
                            title='{{ question.title }}'
                            file="{{ question.file.originalName }}"
                            responses="{{ question.responses.count() }}"
                            author="{{ question.author }}"
                            category="{{ question.category.name }}"
                            createdAt="{{ question.createdAt|date }}"
                        />
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    <section class="w-full h-full flex-col p-2">
        <div class="h-1/4 pb-10 px-10 flex-col items-center justify-start">
            <div class="w-full h-1/6 flex justify-between items-center">
                <h2 class="text-3xl font-semibold">Meilleurs auteurs</h2>
                <a href="#" class="text-[#AD0569] underline text-lg">Voir tout les auteurs</a>
            </div>
            <div class="h-auto flex py-10 justify-between">
                {% set ind = 1 %}
                    {% for author in authors %}
                        <div class="w-1/6 flex">
                            <div class="text-5xl text-[#AD0569] font-bold">
                                {{ ind }}
                            </div>
                            <div class="w-auto">
                                <div class="text-2xl px-5 font-bold flex justify-center items-center">
                                    {{ author.username }}
                                </div>
                                <div class="px-5 font-semibold">
                                    <span class="text-[#D4DB00] pr-2">{{ author.questions.count() }} </span> questions
                                </div>
                            </div>
                        </div>
                    {% set ind = ind + 1 %}
                {% endfor %}
            </div>
        </div>
        <div class="h-auto px-10 flex items-center justify-center">
            <div class="w-full h-full">
                <div class="w-full h-1/6 py-5 flex justify-between items-center">
                    <h2 class="text-3xl font-semibold">Dans la thématique "Sport"</h2>
                    <a href="#" class="text-[#AD0569] underline text-lg">Voir d'autres questions sur "Sports"</a>
                </div>
                <div class="flex justify-between">
                    {% for question in sportsQuestions %}
                        <twig:Card
                            title='{{ question.title }}'
                            file="{{ question.file.originalName }}"
                            responses="{{ question.responses.count() }}"
                            author="{{ question.author }}"
                            category="{{ question.category.name }}"
                            createdAt="{{ question.createdAt|date }}"
                        />
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
    <section class="py-10">
        <div class="h-full px-10 flex items-center justify-center">
            <div class="w-full h-full">
                <div class="w-full h-1/6 py-5 flex justify-between items-center">
                    <h2 class="text-3xl font-semibold">Questions aléatoires</h2>
                </div>
                <div class="h-2/3 flex flex-wrap">
                    {% for question in randomQuestions %}
                        {% if loop.first %}
                            <a href="#" class="w-1/3 rounded-3xl hover:bg-gray-100">
                                <img src="{{ asset('images/' ~ question.file.originalName )}}" alt="img_question" class="p-2 rounded-3xl">
                                <h2 class="font-medium text-2xl p-2">{{ question.title }}</h2>
                                <div class="p-2 flex text-[#AD0569]">
                                    <p>{{ question.responses.count() }} réponses</p>
                                    <span class="px-2">-</span>
                                    <p>par {{ question.author.username }}</p>
                                    <span class="px-2">-</span>
                                    <p>Il y a {{ question.createdAt|date }}</p>
                                </div>
                            </a>
                        {% else %}
                            <a href="#" class="w-1/6 h-4/6 rounded-3xl mx-10 hover:bg-gray-100">
                                <img src="{{ asset('images/' ~ question.file.originalName )}}" alt="img_question" class="h-1/2 object-fill p-2 rounded-3xl">
                                <h2 class="font-medium text-lg p-2">{{ question.title }}</h2>
                                <div class="p-2 flex text-[#AD0569] text-[10px]">
                                    <p>{{ question.responses.count() }} réponses</p>
                                    <span class="px-2">-</span>
                                    <p>par {{ question.author.username }}</p>
                                    <span class="px-2">-</span>
                                    <p>{{ question.createdAt|date }}</p>
                                </div>
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
{% endblock %}
